/*! simpleWebDevTool 16-07-2014 */"use strict";var controller={},simpleWebDevTool={};simpleWebDevTool.controller={},simpleWebDevTool.views={},simpleWebDevTool.service={},simpleWebDevTool.dao={},simpleWebDevTool.util={},simpleWebDevTool.cache={},simpleWebDevTool.component={},console.logBlack=function(a){console.log("%c"+a,"color:#fff;background:#000;")},jQuery(function(){var a=Sammy("#SimpleWebDevTool",function(){this.get("#/path",function(){$("#template").html(_.template(simpleWebDevTool.util.render("template1"))),controller=simpleWebDevTool.controller.pathController(),controller.init()}),this.get("#/path2",function(){$("#template").html(_.template(simpleWebDevTool.util.render("template2"))),controller=simpleWebDevTool.controller.path2Controller(),controller.init()}),this.get("#/vue",function(){console.log("access to #/vue"),$("#template").html(_.template(simpleWebDevTool.util.render("vueTemplate"))),controller=simpleWebDevTool.controller.vueController(),controller.init()}),this.get("#/jquery",function(){console.log("access to #/jquery"),$("#template").html(_.template(simpleWebDevTool.util.render("jqueryTemplate"))),controller=simpleWebDevTool.controller.jqueryController(),controller.load()}),this.get("#/path2/:id",function(){console.log(this.params.id)})});a.run()}),simpleWebDevTool.component.basicSelector=function(a){var b={},c={};return b.refresh=function(b){!_.isEqual(c,b)&&b&&(c=_.cloneDeep(b),$(a).select2({data:b}))},b.getSelectedData=function(){return $(a).select2("data")},b},simpleWebDevTool.component.jstree=function(a){var b={},c={},d=$(a);return b.search=function(a){d.jstree(!0).search(a)},b.getSelectNode=function(){return d.jstree(!0).get_selected()},b.demoCreate=function(){var a=d.jstree(!0),b=a.get_selected();return b.length?(b=b[0],b=a.create_node(b,{type:"file"}),void(b&&a.edit(b))):!1},b.demoRename=function(){var a=d.jstree(!0),b=a.get_selected();return b.length?(b=b[0],void a.edit(b)):!1},b.demoDelete=function(){var a=d.jstree(!0),b=a.get_selected();return b.length?void a.delete_node(b):!1},b.refresh=function(a){!_.isEqual(a,c)&&a&&(console.log("jstree refresh"),c=_.cloneDeep(a),d.jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:[{id:"node_1",text:"Root node",children:[{id:"node_1_1",text:"Child 1"},{id:"node_1_2",text:"Child 2"}]},{id:"node_2",text:"Root node with options",state:{opened:!0,selected:!0},children:[{id:"node_2_1",text:"Child A"},{id:"node_2_2",text:"Child B"}]}]},types:{"#":{max_children:1,max_depth:4,valid_children:["root"]},root:{icon:"/static/3.0.2/assets/images/tree_icon.png",valid_children:["default"]},"default":{valid_children:["default","file"]},file:{icon:"glyphicon glyphicon-file",valid_children:!0}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}))},b},simpleWebDevTool.component.multiSelector=function(a){var b={},c={};return b.refresh=function(b){!_.isEqual(c,b)&&b&&(c=_.cloneDeep(b),$(a).select2({data:b,multiple:!0}))},b.getSelectedData=function(){return $(a).select2("data")},b},simpleWebDevTool.component.sampleList=function(a){var b=$(a),c={},d={};return c.refresh=function(c){!_.isEqual(d,c)&&c&&(d=_.cloneDeep(c),b.empty(),_.forEach(c,function(a){b.append("<li>"+a+"</li>")}),$(a+" li").on("click",function(){var b=$(a+" li").index(this)+1;controller.listEvent(a,b)}))},c.getList=function(){return $(a+" li").map(function(){return Number(this.innerHTML)}).get()},c},simpleWebDevTool.component.slickGrid=function(a){function b(a,b){return a.percentComplete>=b}{var c=[{id:"sel",name:"#",field:"num",behavior:"select",cssClass:"cell-selection",width:40,resizable:!1,selectable:!1,sortable:!0},{id:"title",name:"Title",field:"title",width:120,minWidth:120,cssClass:"cell-title"},{id:"duration",name:"Duration",field:"duration"},{id:"%",name:"% Complete",field:"percentComplete",width:80,resizable:!1,formatter:Slick.Formatters.PercentCompleteBar},{id:"start",name:"Start",field:"start",minWidth:60},{id:"finish",name:"Finish",field:"finish",minWidth:60},{id:"effort-driven",name:"Effort Driven",width:80,minWidth:20,maxWidth:80,cssClass:"cell-effort-driven",field:"effortDriven",formatter:Slick.Formatters.Checkmark}],d={editable:!1,enableAddRow:!1,enableCellNavigation:!0},e=0,f=new Slick.Data.DataView({inlineFilters:!0}),g=new Slick.Grid(a,f,c,d);new Slick.Controls.Pager(f,g,$("#pager"))}f.onRowCountChanged.subscribe(function(){g.updateRowCount(),g.render()}),f.onRowsChanged.subscribe(function(a,b){g.invalidateRows(b.rows),g.render()});var h,i={};return i.refresh=function(a){!_.isEqual(h,a)&&a&&(h=_.cloneDeep(a),f.beginUpdate(),f.setItems(h),f.setFilter(b),f.setFilterArgs(0),f.endUpdate())},i.filterAndUpdate=function(a){var b=a>e,c=e>a,d=g.getRenderedRange();f.setFilterArgs(a),f.setRefreshHints({ignoreDiffsBefore:d.top,ignoreDiffsAfter:d.bottom+1,isFilterNarrowing:b,isFilterExpanding:c}),f.refresh(),e=a},i},simpleWebDevTool.controller.jqueryController=function(){var a="jqueryController",b=simpleWebDevTool.service.mainService(),c=simpleWebDevTool.component.jstree("#jstree_demo"),d=simpleWebDevTool.component.slickGrid("#myGrid"),e=simpleWebDevTool.util.tinyMce("#editable"),f=(simpleWebDevTool.util.tinyMceTitle("#editable_title"),$("#sampleForm")),g=$("#demo_q"),h=simpleWebDevTool.component.sampleList("#list"),i=simpleWebDevTool.component.sampleList("#list2"),j=simpleWebDevTool.component.basicSelector("#basicselect"),k=simpleWebDevTool.component.multiSelector("#e9"),l={};return l.load=function(){console.logBlack("init "+a),b.load()},l.add=function(){console.logBlack("func1 "+a);var c=f.val(),d=h.getList();d=b.add(d,c),controller.refresh({listData:d}),console.log("func1 done")},l.search=function(){console.logBlack("search "+a);var c=b.search(h.getList(),f.val());controller.refresh({listData:c}),console.log("search done"),d.filterAndUpdate(Number(f.val()))},l.addElem=function(){console.logBlack("search "+a);var c=b.addElem(h.getList(),f.val());controller.refresh({listData:c}),console.log("search done")},l.refer=function(){var a=e.getHtml(),c=b.refer(a);controller.refresh({textData:c})},l.init=function(){var a=_.cloneDeep(b.getData());controller.refresh(a)},l.refresh=function(a){console.logBlack("refresh");var e=_.cloneDeep(b.getData());h.refresh(a.listData),i.refresh(a.listData),c.refresh(e.jsData),d.refresh(e.slickData),j.refresh(e.select2Data),k.refresh(e.select2Data),a.textData&&$("#text").text(a.textData)},l.demoCreate=function(){c.demoCreate()},l.demoDelete=function(){c.demoDelete()},l.demoRename=function(){c.demoRename()},l.jstreeSearch=function(){var a=g.val();c.search(a)},l.jstreeRefToForm=function(){var a=c.getSelectNode();g.val(a)},l.listEvent=function(a,b){console.log(a+b)},l.getSelectedData=function(){var a=j.getSelectedData();controller.refresh({textData:JSON.stringify(a)})},l.getSelectedDataMulti=function(){var a=k.getSelectedData();controller.refresh({textData:JSON.stringify(a)})},l},simpleWebDevTool.controller.path2Controller=function(){var a="path2Controller",b=simpleWebDevTool.service.path2Service();return{func1:function(){console.log("func1 "+a),b.func1(),console.log("func1 done")},func2:function(){console.log("func2 "+a),b.func2(),console.log("func2 done")},func3:function(){var c=[1,3];console.log("func3 "+a),b.save(c),console.log("func3 done")},init:function(){console.log("init "+a),b.load(),console.log("init done")},refresh:function(){console.log("refresh "+a);var c=b.getData();$("#list").empty(),_.forEach(c.data,function(a){$("#list").append("<li>"+a+"</li>")}),$("#text").text(c.refHtml)}}},simpleWebDevTool.controller.pathController=function(){var a="pathController",b=simpleWebDevTool.service.pathService();return tinymce.init({selector:"h1.editable",inline:!0,toolbar:"undo redo",menubar:!1}),tinymce.init({selector:"div.editable",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}),$("div.editable").keyup(function(){controller.refer()}),{add:function(){console.log("func1 "+a);var c=$("#sampleForm").val();b.add(c),controller.refresh(),console.log("func1 done")},search:function(){console.log("search "+a);var c=$("#sampleForm").val();b.search(c),controller.refresh(),console.log("search done")},init:function(){console.log("init "+a),b.load()},refer:function(){var a=$("div.editable").html();b.refer(a),controller.refresh()},refresh:function(){var a=b.getData();$("#list").empty(),_.forEach(a.data,function(a){$("#list").append("<li>"+a+"</li>")}),$("#text").text(a.refHtml)}}},simpleWebDevTool.controller.vueController=function(){var a="vueController",b=simpleWebDevTool.service.mainService(),c=new Vue({el:"#template",data:{texts:["# hello"],list:[]}});tinymce.init({selector:"h1.editable",inline:!0,toolbar:"undo redo",menubar:!1}),tinymce.init({selector:"div.editable",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}),$("div.editable").keyup(function(){controller.refer()});var d={};return d.add=function(){console.log("func1 "+a);var c=$("#sampleForm").val();b.add(c),controller.refresh(),console.log("func1 done")},d.search=function(){console.log("search "+a);var c=$("#sampleForm").val();b.search(c),controller.refresh(),console.log("search done")},d.addElem=function(){console.log("search "+a);var c=$("#sampleForm").val();b.addElem(c),controller.refresh(),console.log("search done")},d.init=function(){console.log("init "+a),b.load()},d.refer=function(){var a=$("div.editable").html();b.refer(a),controller.refresh()},d.refresh=function(){var a=b.getData();c.list=a.data,c.texts=[a.refHtml]},d},simpleWebDevTool.dao.mainDao=function(){var a="mainDao",b={};return b.load=function(){return console.log("load "+a),simpleWebDevTool.util.getAjaxAsync("jsonApi/path/2",controller.init)},b.loadJsTree=function(){return console.log("loadJsTree "+a),simpleWebDevTool.util.getAjaxAsync("jsonApi/jstree/1",controller.init)},b.loadSlickGrid=function(){return console.log("loadJsTree "+a),simpleWebDevTool.util.getAjaxAsync("jsonApi/slickGrid/1",controller.init)},b.loadSelect2=function(){return console.log("loadJsTree "+a),simpleWebDevTool.util.getAjaxAsync("jsonApi/select2/1",controller.init)},b.getData=function(){return console.log("load "+a),simpleWebDevTool.util.getAjaxIfExist("jsonApi/path/2")},b.getJsTree=function(){return console.log("loadJsTree "+a),simpleWebDevTool.util.getAjaxIfExist("jsonApi/jstree/1")},b.getSlickGrid=function(){return console.log("loadJsTree "+a),simpleWebDevTool.util.getAjaxIfExist("jsonApi/slickGrid/1")},b.getSelect2=function(){return console.log("getSelect2 "+a),simpleWebDevTool.util.getAjaxIfExist("jsonApi/select2/1")},b.save=function(b){return console.log("save "+a),simpleWebDevTool.util.putAjaxAsync("jsonApi/path/2",b,controller.refresh)},b},simpleWebDevTool.dao.path2Dao=function(){var a="path2Dao";return{load:function(b){return console.log("load "+a),simpleWebDevTool.util.getAjaxAsync("jsonApi/path/2",b,controller.refresh)},save:function(b,c){return console.log("save "+a),simpleWebDevTool.util.putAjaxAsync("jsonApi/path/2",b,c,controller.refresh)}}},simpleWebDevTool.dao.pathDao=function(){var a="pathDao";return{load:function(b){return console.log("load "+a),simpleWebDevTool.util.getAjaxAsync("jsonApi/path/2",b,controller.refresh)},save:function(b,c){return console.log("save "+a),simpleWebDevTool.util.putAjaxAsync("jsonApi/path/2",b,c,controller.refresh)}}};var InfoWindowStock=function(){this.stock=[]};InfoWindowStock.prototype={createKey:function(a){var b=a.k+":"+a.A;return b},put:function(a,b){var c=this.createKey(a);this.stock[c]=b},get:function(a){var b=this.createKey(a);return this.stock[b]}},simpleWebDevTool.service.mainService=function(){var a="mainService",b=simpleWebDevTool.dao.mainDao(),c={};return c.add=function(b,c){return console.log("func1 "+a),_.map(b,function(a){return a+Number(c)})},c.search=function(b,c){return console.log("func2 "+a),_.filter(b,function(a){return-1!==String(a).indexOf(c)})},c.addElem=function(b,c){console.log("func2 "+a);for(var d=0;d<Number(c);++d)b.push(Math.random());return b},c.load=function(){console.log("load "+a),b.load(),b.loadJsTree(),b.loadSlickGrid(),b.loadSelect2()},c.refer=function(a){return a+" ほげほげほげ"},c.getData=function(){console.log("refresh "+a);var c={};return c.listData=b.getData(),c.jsData=b.getJsTree(),c.slickData=b.getSlickGrid(),c.select2Data=b.getSelect2(),c},c},simpleWebDevTool.service.path2Service=function(){var a="path2Service",b=simpleWebDevTool.dao.path2Dao(),c={};return{func1:function(){console.log("func1 "+a),c.data=_.map(c.data,function(a){return a+1}),controller.refresh()},func2:function(){console.log("func2 "+a),c.data=_.filter(c.data,function(a){return a%2===0}),controller.refresh()},save:function(d){console.log("save "+a),b.save(c,d)},load:function(){console.log("load "+a),b.load(c)},getData:function(){return console.log("refresh "+a),c}}},simpleWebDevTool.service.pathService=function(){var a="pathService",b=simpleWebDevTool.dao.pathDao(),c={};return{add:function(b){console.log("func1 "+a),c.data=_.map(c.data,function(a){return a+Number(b)})},search:function(b){console.log("func2 "+a),c.str=b,c.data=_.filter(c.data,function(a){return a===Number(b)})},load:function(){console.log("load "+a),b.load(c),console.log(c)},refer:function(a){c.refHtml=a+" refer"},getData:function(){return console.log("refresh "+a),c}}},simpleWebDevTool.service.vueService=function(){var a="vueService",b=simpleWebDevTool.dao.pathDao(),c={};return{add:function(b){console.log("func1 "+a),c.data=_.map(c.data,function(a){return a+Number(b)})},search:function(b){console.log("func2 "+a),c.str=b,c.data=_.filter(c.data,function(a){return a===Number(b)})},load:function(){console.log("load "+a),b.load(c),console.log(c)},refer:function(a){c.refHtml=a+" refer"},getData:function(){return console.log("refresh "+a),c}}},simpleWebDevTool.cache.ajaxCache={},simpleWebDevTool.util.getAjaxAsync=function(a,b){console.log("getAjaxAsync url:"+a);var c=simpleWebDevTool.cache.ajaxCache;return c[a]||$.ajax({type:"GET",url:a,async:!0}).done(function(d){console.log("success"),console.log(d),c[a]=d,b&&b()}).fail(function(){console.error("error")}),c[a]},simpleWebDevTool.util.getAjaxIfExist=function(a){return console.log("getAjaxIfExist url:"+a),simpleWebDevTool.cache.ajaxCache[a]},simpleWebDevTool.util.putAjaxAsync=function(a,b,c){console.log("putAjaxAsync url:"+a);var d={};return $.ajax({type:"POST",url:a,async:!0,data:b}).done(function(a){console.log("success"),console.log(a),d=a,c()}).fail(function(){console.error(b)}),d},simpleWebDevTool.util.getAjaxSyncWithCache=function(a){var b=[];return b[a]||$.ajax({type:"GET",url:a,async:!1}).done(function(c){console.log("success"),console.log(c),b[a]=c}).fail(function(){console.error("error")}),b[a]},simpleWebDevTool.cache.tmplCache={},simpleWebDevTool.util.render=function(a){var b=simpleWebDevTool.cache.tmplCache;if(!b[a]){var c="views/"+a+".html";$.ajax({url:c,method:"GET",async:!1,dataType:"html",success:function(c){b[a]=c}})}return b[a]},simpleWebDevTool.util.dummyWait=function(a){for(var b=(new Date).getTime(),c=(new Date).getTime();b+a>c;)c=(new Date).getTime()},simpleWebDevTool.util.time={},simpleWebDevTool.util.countStart=function(){simpleWebDevTool.util.startTime=(new Date).getTime(),console.info("count start")},simpleWebDevTool.util.timeShow=function(){var a=(new Date).getTime();console.info(a-simpleWebDevTool.util.startTime+" ms")},simpleWebDevTool.util.tinyMce=function(a){return tinymce.init({selector:a,inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}),{getHtml:function(){return $(a).html()}}},simpleWebDevTool.util.tinyMceTitle=function(a){return tinymce.init({selector:a,inline:!0,toolbar:"undo redo",menubar:!1}),{value:$(a).val()}};
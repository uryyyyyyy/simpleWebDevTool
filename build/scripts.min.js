/*! simpleWebDevTool 31-07-2014 */var simpleWebDevTool={};simpleWebDevTool.controller={},simpleWebDevTool.views={},simpleWebDevTool.service={},simpleWebDevTool.dao={},simpleWebDevTool.util={},simpleWebDevTool.cache={},simpleWebDevTool.component={},jQuery(function(){"use strict";var a=Sammy("#SimpleWebDevTool",function(a){a.get("#/path",function(){$("#template").html(_.template(simpleWebDevTool.util.render("template1"))),simpleWebDevTool.controller.pathController().init()}),a.get("#/path2",function(){$("#template").html(_.template(simpleWebDevTool.util.render("template2"))),simpleWebDevTool.controller.path2Controller().init()}),a.get("#/vue/:id",function(a){console.log("access to #/vue"),$("#template").html(_.template(simpleWebDevTool.util.render("vueTemplate"))),simpleWebDevTool.controller.vueController(a.params.id).load()}),a.get("#/jquery/:id",function(a){console.log("access to #/jquery"),$("#template").html(_.template(simpleWebDevTool.util.render("jqueryTemplate"))),simpleWebDevTool.controller.jqueryController(a.params.id).load()}),a.get("#/path2/:id",function(a){console.log(a.params.id)})});a.run()}),simpleWebDevTool.component.basicSelector=function(a){"use strict";var b=$(a),c={};return{refresh:function(b){!_.isEqual(c,b)&&b&&(c=_.cloneDeep(b),$(a).select2({data:b}))},getSelectedData:function(){return $(a).select2("data")},clickEStream:b.asEventStream("click")}},simpleWebDevTool.component.jstree=function(a){"use strict";var b={},c=$(a);return{search:function(a){c.jstree(!0).search(a)},getSelectNode:function(){return c.jstree(!0).get_selected()},demoCreate:function(){var a=c.jstree(!0),b=a.get_selected();return b.length?(b=b[0],b=a.create_node(b,{type:"file"}),void(b&&a.edit(b))):!1},demoRename:function(){var a=c.jstree(!0),b=a.get_selected();return b.length?(b=b[0],void a.edit(b)):!1},demoDelete:function(){var a=c.jstree(!0),b=a.get_selected();return b.length?void a.delete_node(b):!1},refresh:function(a){!_.isEqual(a,b)&&a&&(console.log("jstree refresh"),b=_.cloneDeep(a),c.jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:[{id:"node_1",text:"Root node",children:[{id:"node_1_1",text:"Child 1"},{id:"node_1_2",text:"Child 2"}]},{id:"node_2",text:"Root node with options",state:{opened:!0,selected:!0},children:[{id:"node_2_1",text:"Child A"},{id:"node_2_2",text:"Child B"}]}]},types:{"#":{max_children:1,max_depth:4,valid_children:["root"]},root:{icon:"/static/3.0.2/assets/images/tree_icon.png",valid_children:["default"]},"default":{valid_children:["default","file"]},file:{icon:"glyphicon glyphicon-file",valid_children:!0}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}))},clickEStream:c.asEventStream("click")}},simpleWebDevTool.component.mergely=function(a){"use strict";var b=$(a),c={};return{refresh:function(a){!_.isEqual(c,a)&&a&&(c=_.cloneDeep(a),b.mergely({cmsettings:{readOnly:!1,lineNumbers:!0},lhs:function(a){a("the quick red fox\njumped over the hairy dog")},rhs:function(a){a("the quick brown fox\njumped over the lazy dog")},editor_width:"250px"}))},clickEStream:b.asEventStream("click")}},simpleWebDevTool.component.multiSelector=function(a){"use strict";var b=$(a),c={};return{refresh:function(b){!_.isEqual(c,b)&&b&&(c=_.cloneDeep(b),$(a).select2({data:b,multiple:!0}))},getSelectedData:function(){return $(a).select2("data")},clickEStream:b.asEventStream("click")}},simpleWebDevTool.component.sampleBox=function(a){"use strict";var b=$(a),c={};return{refresh:function(a){!_.isEqual(c,a)&&a&&(c=_.cloneDeep(a),b.empty(),_.forEach(a,function(a){var c=a+"_box";b.append(_.template(simpleWebDevTool.util.render("template_partial"),{_id:c}));var d=simpleWebDevTool.component.tinyMce("#"+c);d.refresh({mainText:a})}))},getValue:function(){return b.val()}}},simpleWebDevTool.component.sampleButton=function(a){"use strict";var b=$(a),c={};return{refresh:function(a){!_.isEqual(c,a)&&a&&(c=_.cloneDeep(a),b.val(a))},getText:function(){return b.val()},clickEStream:$(a).asEventStream("click")}},simpleWebDevTool.component.sampleFloat=function(a){"use strict";$(a).portamento()},simpleWebDevTool.component.sampleForm=function(a){"use strict";var b=$(a);return{refresh:function(a){b.val(a)},getValue:function(){return b.val()},keyUpEStream:b.asEventStream("keyup")}},simpleWebDevTool.component.sampleList=function(a){"use strict";var b=$(a),c={},d=function(a){var b=a.target,c=_.findIndex(b.parentElement.children,function(a){return _.isEqual(a,b)});return c+1};return{refresh:function(a){!_.isEqual(c,a)&&a&&(c=_.cloneDeep(a),b.empty(),_.forEach(a,function(a){b.append("<li>"+a+"</li>")}))},getList:function(){return $(a+" li").map(function(){return Number(this.innerHTML)}).get()},clickEStream:$(a).asEventStream("click","li").map(function(a){return d(a)})}},simpleWebDevTool.component.slickGrid=function(a){function b(a,b){return a.percentComplete>=b}{var c=[{id:"sel",name:"#",field:"num",behavior:"select",cssClass:"cell-selection",width:40,resizable:!1,selectable:!1,sortable:!0},{id:"title",name:"Title",field:"title",width:120,minWidth:120,cssClass:"cell-title"},{id:"duration",name:"Duration",field:"duration"},{id:"%",name:"% Complete",field:"percentComplete",width:80,resizable:!1,formatter:Slick.Formatters.PercentCompleteBar},{id:"start",name:"Start",field:"start",minWidth:60},{id:"finish",name:"Finish",field:"finish",minWidth:60},{id:"effort-driven",name:"Effort Driven",width:80,minWidth:20,maxWidth:80,cssClass:"cell-effort-driven",field:"effortDriven",formatter:Slick.Formatters.Checkmark}],d={editable:!1,enableAddRow:!1,enableCellNavigation:!0},e=0,f=new Slick.Data.DataView({inlineFilters:!0}),g=new Slick.Grid(a,f,c,d);new Slick.Controls.Pager(f,g,$("#pager"))}f.onRowCountChanged.subscribe(function(){g.updateRowCount(),g.render()}),f.onRowsChanged.subscribe(function(a,b){g.invalidateRows(b.rows),g.render()});var h,i={};return i.refresh=function(a){!_.isEqual(h,a)&&a&&(h=_.cloneDeep(a),f.beginUpdate(),f.setItems(h),f.setFilter(b),f.setFilterArgs(0),f.endUpdate())},i.filterAndUpdate=function(a){var b=a>e,c=e>a,d=g.getRenderedRange();f.setFilterArgs(a),f.setRefreshHints({ignoreDiffsBefore:d.top,ignoreDiffsAfter:d.bottom+1,isFilterNarrowing:b,isFilterExpanding:c}),f.refresh(),e=a},i},simpleWebDevTool.component.tinyMce=function(a){"use strict";var b,c=$(a);return{getHtml:function(){return c.html()},refresh:function(d){d&&!_.isEqual(b,d)&&(tinymce.init({selector:a,inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",image_list:d.imageList}),c.html(d.mainText),b=d)},keyUpEStream:c.asEventStream("keyup")}},simpleWebDevTool.component.tinyMceTitle=function(a){"use strict";var b,c=$(a);return{getValue:function(){return c.val()},refresh:function(d){!_.isEqual(b,d)&&d&&(tinymce.init({selector:a,inline:!0,toolbar:"undo redo",menubar:!1}),c.val(d.mainText))}}},simpleWebDevTool.controller.jqueryController=function(a){"use strict";var b=Number(a),c=simpleWebDevTool.component,d=simpleWebDevTool.service.mainService,e=c.jstree("#jstree_demo"),f=c.slickGrid("#myGrid"),g=c.tinyMce("#editable"),h=c.tinyMceTitle("#editable_title"),i=c.sampleForm("#sampleForm"),j=c.sampleForm("#jstree_text"),k=$("#text"),l=c.sampleList("#list"),m=c.sampleList("#list2"),n=c.basicSelector("#basicSelect"),o=c.multiSelector("#multiSelect"),p=c.sampleBox("#box"),q=(c.sampleFloat("#float_"),c.mergely("#compare")),r=c.sampleButton("#addButton"),s=c.sampleButton("#searchButton"),t=c.sampleButton("#addElemButton"),u=c.sampleButton("#demoCreateButton"),v=c.sampleButton("#demoRenameButton"),w=c.sampleButton("#demoDeleteButton");g.keyUpEStream.assign(function(){console.log("tinyMce.keyUpEStream");var a=d.refer(g.getHtml());x({textData:a})}),l.clickEStream.assign(function(a){console.log("sampleList.clickEStream"),i.refresh("click the 1st list "+a+"th")}),m.clickEStream.assign(function(a){console.log("sampleList2.clickEStream"),i.refresh("click the 2nd list "+a+"th")}),e.clickEStream.assign(function(){var a=e.getSelectNode();j.refresh(a)}),n.clickEStream.assign(function(){var a=n.getSelectedData();x({textData:JSON.stringify(a)})}),o.clickEStream.assign(function(){var a=o.getSelectedData();x({textData:JSON.stringify(a)})}),r.clickEStream.assign(function(){console.log("addButton");var a=i.getValue(),b=l.getList();b=d.add(b,a),x({listData:b})}),s.clickEStream.assign(function(){console.log("searchButton");var a=d.search(l.getList(),i.getValue());x({listData:a}),f.filterAndUpdate(Number(i.getValue()))}),t.clickEStream.assign(function(){console.log("addElemButton");var a=d.addElem(l.getList(),i.getValue());x({listData:a})}),u.clickEStream.assign(function(){e.demoCreate()}),v.clickEStream.assign(function(){e.demoRename()}),w.clickEStream.assign(function(){e.demoDelete()}),j.keyUpEStream.assign(function(){e.search(j.getValue())});var x=function(a){console.log("refresh");var b=_.cloneDeep(a);l.refresh(b.listData),m.refresh(b.listData),e.refresh(b.jsData),f.refresh(b.slickData),n.refresh(b.select2Data),o.refresh(b.select2Data),p.refresh(b.listData),g.refresh(b.tinyMceData),h.refresh(b.tinyMceData),q.refresh(b.tinyMceData),b.textData&&k.text(b.textData)};return{load:function(){console.log("load"),d.load(b).assign(x)}}},simpleWebDevTool.controller.vueController=function(a){"use strict";var b=Number(a),c=simpleWebDevTool.component,d=simpleWebDevTool.service.mainService,e=c.sampleButton("#addButton"),f=c.tinyMce("#editable"),g=c.tinyMceTitle("#editable_title"),h=c.sampleButton("#searchButton"),i=c.sampleButton("#addElemButton"),j=new Vue({el:"#template",data:{text:"# hello",list:[],form_:""}});f.keyUpEStream.assign(function(){console.log("tinyMce.keyUpEStream"),j.text=d.refer(f.getHtml())}),e.clickEStream.assign(function(){console.log("addButton");var a=j.form_,b=j.list;j.list=d.add(b,a)}),h.clickEStream.assign(function(){console.log("searchButton"),j.list=d.search(j.list,j.form_)}),i.clickEStream.assign(function(){console.log("addElemButton"),j.list=d.addElem(j.list,j.form_)});var k=function(a){console.log("refresh");var b=_.cloneDeep(a);j.list=b.listData,j.text=b.tinyMceData.mainText,f.refresh(b.tinyMceData),g.refresh(b.tinyMceData)};return{load:function(){console.log("load"),d.load(b).assign(k)}}},function(){"use strict";var a=simpleWebDevTool.util;simpleWebDevTool.dao.mainDao={getSampleList:function(b){return console.log("dao.mainDao.load"),Bacon.fromPromise(a.getAjaxAsync("jsonApi/path/"+b))},getJsTree:function(b){return console.log("dao.mainDao.load"),Bacon.fromPromise(a.getAjaxAsync("jsonApi/jstree/"+b))},getSlickGrid:function(b){return console.log("dao.mainDao.load"),Bacon.fromPromise(a.getAjaxAsync("jsonApi/slickGrid/"+b))},getSelect2:function(b){return console.log("dao.mainDao.load"),Bacon.fromPromise(a.getAjaxAsync("jsonApi/select2/"+b))},getTinyMce:function(b){return console.log("dao.mainDao.load"),Bacon.fromPromise(a.getAjaxAsync("jsonApi/tinyMce/"+b))},save:function(b){return console.log("dao.mainDao.save"),Bacon.combineTemplate({response:a.postAjaxAsync("jsonApi/path/2",b)})}}}(jQuery);var InfoWindowStock=function(){this.stock=[]};InfoWindowStock.prototype={createKey:function(a){var b=a.k+":"+a.A;return b},put:function(a,b){var c=this.createKey(a);this.stock[c]=b},get:function(a){var b=this.createKey(a);return this.stock[b]}},function(){"use strict";var a=simpleWebDevTool.dao;simpleWebDevTool.service.mainService={add:function(a,b){return console.log("service.mainService.add"),_.map(a,function(a){return a+Number(b)})},search:function(a,b){return console.log("service.mainService.search"),_.filter(a,function(a){return-1!==String(a).indexOf(b)})},addElem:function(a,b){console.log("service.mainService.addElem");for(var c=0;c<Number(b);++c)a.push(Math.random());return a},load:function(b){return console.log("service.mainService.load"),Bacon.combineTemplate({listData:a.mainDao.getSampleList(b),jsData:a.mainDao.getJsTree(b),slickData:a.mainDao.getSlickGrid(b),select2Data:a.mainDao.getSelect2(b),tinyMceData:a.mainDao.getTinyMce(b)})},refer:function(a){return console.log("service.mainService.refer"),a+" ほげほげほげ"}}}(jQuery),simpleWebDevTool.util.getAjaxAsync=function(a){"use strict";return console.log("getAjaxAsync url:"+a),$.ajax({type:"GET",url:a,async:!0})},simpleWebDevTool.util.postAjaxAsync=function(a,b){"use strict";return console.log("putAjaxAsync url:"+a),$.ajax({type:"POST",url:a,async:!0,data:b})},simpleWebDevTool.util.getAjaxSyncWithCache=function(a){"use strict";var b=[];return b[a]||$.ajax({type:"GET",url:a,async:!1}).done(function(c){console.log("success"),console.log(c),b[a]=c}).fail(function(){console.error("error")}),b[a]},simpleWebDevTool.cache.tmplCache={},simpleWebDevTool.util.render=function(a){var b=simpleWebDevTool.cache.tmplCache;if(!b[a]){var c="views/"+a+".html";$.ajax({url:c,method:"GET",async:!1,dataType:"html",success:function(c){b[a]=c}})}return b[a]},simpleWebDevTool.util.dummyWait=function(a){for(var b=(new Date).getTime(),c=(new Date).getTime();b+a>c;)c=(new Date).getTime()},simpleWebDevTool.util.countStart=function(){simpleWebDevTool.util.startTime=(new Date).getTime(),console.info("count start")},simpleWebDevTool.util.timeShow=function(){var a=(new Date).getTime();console.info(a-simpleWebDevTool.util.startTime+" ms")};
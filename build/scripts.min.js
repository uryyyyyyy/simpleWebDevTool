/*! simpleWebDevTool 30-07-2014 */var simpleWebDevTool={};simpleWebDevTool.controller={},simpleWebDevTool.views={},simpleWebDevTool.service={},simpleWebDevTool.dao={},simpleWebDevTool.util={},simpleWebDevTool.cache={},simpleWebDevTool.component={},console.logBlack=function(a){console.log("%c"+a,"color:#fff;background:#000;")},jQuery(function(){"use strict";var a=Sammy("#SimpleWebDevTool",function(a){var b;a.get("#/path",function(){$("#template").html(_.template(simpleWebDevTool.util.render("template1"))),b=simpleWebDevTool.controller.pathController(),b.init()}),a.get("#/path2",function(){$("#template").html(_.template(simpleWebDevTool.util.render("template2"))),b=simpleWebDevTool.controller.path2Controller(),b.init()}),a.get("#/vue",function(){console.log("access to #/vue"),$("#template").html(_.template(simpleWebDevTool.util.render("vueTemplate"))),b=simpleWebDevTool.controller.vueController(),b.load()}),a.get("#/jquery",function(){console.log("access to #/jquery"),$("#template").html(_.template(simpleWebDevTool.util.render("jqueryTemplate"))),b=simpleWebDevTool.controller.jqueryController(),b.load()}),a.get("#/path2/:id",function(a){console.log(a.params.id)})});a.run()}),simpleWebDevTool.component.basicSelector=function(a){"use strict";var b=$(a),c={};return{refresh:function(b){!_.isEqual(c,b)&&b&&(c=_.cloneDeep(b),$(a).select2({data:b}))},getSelectedData:function(){return $(a).select2("data")},clickEStream:b.asEventStream("click")}},simpleWebDevTool.component.jstree=function(a){"use strict";var b={},c=$(a);return{search:function(a){c.jstree(!0).search(a)},getSelectNode:function(){return c.jstree(!0).get_selected()},demoCreate:function(){var a=c.jstree(!0),b=a.get_selected();return b.length?(b=b[0],b=a.create_node(b,{type:"file"}),void(b&&a.edit(b))):!1},demoRename:function(){var a=c.jstree(!0),b=a.get_selected();return b.length?(b=b[0],void a.edit(b)):!1},demoDelete:function(){var a=c.jstree(!0),b=a.get_selected();return b.length?void a.delete_node(b):!1},refresh:function(a){!_.isEqual(a,b)&&a&&(console.log("jstree refresh"),b=_.cloneDeep(a),c.jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:[{id:"node_1",text:"Root node",children:[{id:"node_1_1",text:"Child 1"},{id:"node_1_2",text:"Child 2"}]},{id:"node_2",text:"Root node with options",state:{opened:!0,selected:!0},children:[{id:"node_2_1",text:"Child A"},{id:"node_2_2",text:"Child B"}]}]},types:{"#":{max_children:1,max_depth:4,valid_children:["root"]},root:{icon:"/static/3.0.2/assets/images/tree_icon.png",valid_children:["default"]},"default":{valid_children:["default","file"]},file:{icon:"glyphicon glyphicon-file",valid_children:!0}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}))},clickEStream:c.asEventStream("click")}},simpleWebDevTool.component.multiSelector=function(a){"use strict";var b=$(a),c={};return{refresh:function(b){!_.isEqual(c,b)&&b&&(c=_.cloneDeep(b),$(a).select2({data:b,multiple:!0}))},getSelectedData:function(){return $(a).select2("data")},clickEStream:b.asEventStream("click")}},simpleWebDevTool.component.sampleBox=function(a){"use strict";var b=$(a),c={};return{refresh:function(a){!_.isEqual(c,a)&&a&&(c=_.cloneDeep(a),b.empty(),_.forEach(a,function(a){var c=a+"_box";b.append(_.template(simpleWebDevTool.util.render("template_partial"),{_id:c}));var d=simpleWebDevTool.component.tinyMce("#"+c);d.refresh({main_text:a})}))},getValue:function(){return b.val()}}},simpleWebDevTool.component.sampleFloat=function(a){"use strict";$(a).portamento()},simpleWebDevTool.component.sampleForm=function(a){"use strict";var b=$(a);return{refresh:function(a){b.val(a)},getValue:function(){return b.val()},keyUpEStream:b.asEventStream("keyup")}},simpleWebDevTool.component.sampleList=function(a){"use strict";var b=$(a),c={},d=function(a){var b=a.target,c=_.findIndex(b.parentElement.children,function(a){return _.isEqual(a,b)});return c+1};return{refresh:function(a){!_.isEqual(c,a)&&a&&(c=_.cloneDeep(a),b.empty(),_.forEach(a,function(a){b.append("<li>"+a+"</li>")}))},getList:function(){return $(a+" li").map(function(){return Number(this.innerHTML)}).get()},clickEStream:$(a).asEventStream("click","li").map(function(a){return d(a)})}},simpleWebDevTool.component.slickGrid=function(a){function b(a,b){return a.percentComplete>=b}{var c=[{id:"sel",name:"#",field:"num",behavior:"select",cssClass:"cell-selection",width:40,resizable:!1,selectable:!1,sortable:!0},{id:"title",name:"Title",field:"title",width:120,minWidth:120,cssClass:"cell-title"},{id:"duration",name:"Duration",field:"duration"},{id:"%",name:"% Complete",field:"percentComplete",width:80,resizable:!1,formatter:Slick.Formatters.PercentCompleteBar},{id:"start",name:"Start",field:"start",minWidth:60},{id:"finish",name:"Finish",field:"finish",minWidth:60},{id:"effort-driven",name:"Effort Driven",width:80,minWidth:20,maxWidth:80,cssClass:"cell-effort-driven",field:"effortDriven",formatter:Slick.Formatters.Checkmark}],d={editable:!1,enableAddRow:!1,enableCellNavigation:!0},e=0,f=new Slick.Data.DataView({inlineFilters:!0}),g=new Slick.Grid(a,f,c,d);new Slick.Controls.Pager(f,g,$("#pager"))}f.onRowCountChanged.subscribe(function(){g.updateRowCount(),g.render()}),f.onRowsChanged.subscribe(function(a,b){g.invalidateRows(b.rows),g.render()});var h,i={};return i.refresh=function(a){!_.isEqual(h,a)&&a&&(h=_.cloneDeep(a),f.beginUpdate(),f.setItems(h),f.setFilter(b),f.setFilterArgs(0),f.endUpdate())},i.filterAndUpdate=function(a){var b=a>e,c=e>a,d=g.getRenderedRange();f.setFilterArgs(a),f.setRefreshHints({ignoreDiffsBefore:d.top,ignoreDiffsAfter:d.bottom+1,isFilterNarrowing:b,isFilterExpanding:c}),f.refresh(),e=a},i},simpleWebDevTool.component.tinyMce=function(a){var b,c=$(a);return{getHtml:function(){return c.html()},refresh:function(d){d&&!_.isEqual(b,d)&&(tinymce.init({selector:a,inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",image_list:d.image_list}),c.html(d.main_text),b=d)},keyUpEStream:c.asEventStream("keyup")}},simpleWebDevTool.component.tinyMceTitle=function(a){var b;return{getValue:function(){return $(a).val()},refresh:function(c){!_.isEqual(b,c)&&c&&(tinymce.init({selector:a,inline:!0,toolbar:"undo redo",menubar:!1}),$(a).val(c.main_text))}}},simpleWebDevTool.controller.jqueryController=function(){{var a=simpleWebDevTool.service.mainService,b=simpleWebDevTool.component.jstree("#jstree_demo"),c=simpleWebDevTool.component.slickGrid("#myGrid"),d=simpleWebDevTool.component.tinyMce("#editable"),e=simpleWebDevTool.component.tinyMceTitle("#editable_title"),f=simpleWebDevTool.component.sampleForm("#sampleForm"),g=simpleWebDevTool.component.sampleForm("#jstree_text"),h=$("#text"),i=simpleWebDevTool.component.sampleList("#list"),j=simpleWebDevTool.component.sampleList("#list2"),k=simpleWebDevTool.component.basicSelector("#basicSelect"),l=simpleWebDevTool.component.multiSelector("#multiSelect"),m=simpleWebDevTool.component.sampleBox("#box");simpleWebDevTool.component.sampleFloat("#float_")}d.keyUpEStream.assign(function(){console.logBlack("tinyMce.keyUpEStream");var b=a.refer(d.getHtml());n({textData:b})}),i.clickEStream.assign(function(a){console.logBlack("sampleList.clickEStream"),f.refresh("click the 1st list "+a+"th")}),j.clickEStream.assign(function(a){console.logBlack("sampleList2.clickEStream"),f.refresh("click the 2nd list "+a+"th")}),b.clickEStream.assign(function(){var a=b.getSelectNode();g.refresh(a)}),k.clickEStream.assign(function(){var a=k.getSelectedData();n({textData:JSON.stringify(a)})}),l.clickEStream.assign(function(){var a=l.getSelectedData();n({textData:JSON.stringify(a)})}),$("#addButton").asEventStream("click").onValue(function(){console.logBlack("addButton");var b=f.getValue(),c=i.getList();c=a.add(c,b),n({listData:c})}),$("#searchButton").asEventStream("click").onValue(function(){console.logBlack("searchButton");var b=a.search(i.getList(),f.getValue());n({listData:b}),c.filterAndUpdate(Number(f.getValue()))}),$("#addElemButton").asEventStream("click").onValue(function(){console.logBlack("addElemButton");var b=a.addElem(i.getList(),f.getValue());n({listData:b})}),$("#demoCreateButton").asEventStream("click").onValue(function(){b.demoCreate()}),$("#demoRenameButton").asEventStream("click").onValue(function(){b.demoRename()}),$("#demoDeleteButton").asEventStream("click").onValue(function(){b.demoDelete()}),g.keyUpEStream.assign(function(){b.search(g.getValue())});var n=function(a){console.logBlack("refresh");var f=_.cloneDeep(a);i.refresh(f.listData),j.refresh(f.listData),b.refresh(f.jsData),c.refresh(f.slickData),k.refresh(f.select2Data),l.refresh(f.select2Data),m.refresh(f.listData),d.refresh(f.tinyMceData),e.refresh(f.tinyMceData),f.textData&&h.text(f.textData)};return{load:function(){console.logBlack("load"),a.load().assign(n)}}},simpleWebDevTool.controller.path2Controller=function(){var a="path2Controller",b=simpleWebDevTool.service.path2Service();return{func1:function(){console.log("func1 "+a),b.func1(),console.log("func1 done")},func2:function(){console.log("func2 "+a),b.func2(),console.log("func2 done")},func3:function(){var c=[1,3];console.log("func3 "+a),b.save(c),console.log("func3 done")},init:function(){console.log("init "+a),b.load(),console.log("init done")},refresh:function(){console.log("refresh "+a);var c=b.getData();$("#list").empty(),_.forEach(c.data,function(a){$("#list").append("<li>"+a+"</li>")}),$("#text").text(c.refHtml)}}},simpleWebDevTool.controller.pathController=function(){var a="pathController",b=simpleWebDevTool.service.pathService();return tinymce.init({selector:"h1.editable",inline:!0,toolbar:"undo redo",menubar:!1}),tinymce.init({selector:"div.editable",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}),$("div.editable").keyup(function(){controller.refer()}),{add:function(){console.log("func1 "+a);var c=$("#sampleForm").val();b.add(c),controller.refresh(),console.log("func1 done")},search:function(){console.log("search "+a);var c=$("#sampleForm").val();b.search(c),controller.refresh(),console.log("search done")},init:function(){console.log("init "+a),b.load()},refer:function(){var a=$("div.editable").html();b.refer(a),controller.refresh()},refresh:function(){var a=b.getData();$("#list").empty(),_.forEach(a.data,function(a){$("#list").append("<li>"+a+"</li>")}),$("#text").text(a.refHtml)}}},simpleWebDevTool.controller.vueController=function(){var a="vueController",b=simpleWebDevTool.service.mainService,c=new Vue({el:"#template",data:{texts:["# hello"],list:[],form_:""}});tinymce.init({selector:"h1.editable",inline:!0,toolbar:"undo redo",menubar:!1}),tinymce.init({selector:"div.editable",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"}),$("div.editable").keyup(function(){controller.refer()});var d={};return d.add=function(){console.log("func1 "+a);var d=$("#sampleForm").val(),e=b.add(c.list,d);controller.refresh({listData:e}),console.log("func1 done")},d.search=function(){console.log("search "+a);var d=$("#sampleForm").val(),e=b.search(c.list,d);controller.refresh({listData:e}),console.log("search done")},d.addElem=function(){console.log("search "+a);var d=$("#sampleForm").val(),e=b.addElem(c.list,d);controller.refresh({listData:e}),console.log("search done")},d.init=function(){var a=_.cloneDeep(b.getData());controller.refresh(a)},d.load=function(){console.logBlack("init "+a),b.load(),controller.init()},d.refer=function(){var a=$("div.editable").html();b.refer(a),controller.refresh()},d.refresh=function(a){console.logBlack("refresh");var b=_.cloneDeep(a);c.list=b.listData,c.texts=b.textData},d},simpleWebDevTool.dao.mainDao={},function(){"use strict";var a=simpleWebDevTool.dao.mainDao,b=simpleWebDevTool.util;a.load=function(){return console.log("dao.mainDao.load"),Bacon.combineTemplate({listData:Bacon.fromPromise(b.getAjaxAsync("jsonApi/path/2")),jsData:Bacon.fromPromise(b.getAjaxAsync("jsonApi/jstree/1")),slickData:Bacon.fromPromise(b.getAjaxAsync("jsonApi/slickGrid/1")),select2Data:Bacon.fromPromise(b.getAjaxAsync("jsonApi/select2/1")),tinyMceData:Bacon.fromPromise(b.getAjaxAsync("jsonApi/tinyMce/1"))})},a.save=function(a){return console.log("dao.mainDao.save"),b.putAjaxAsync("jsonApi/path/2",a,controller.refresh)}}(jQuery);var InfoWindowStock=function(){this.stock=[]};InfoWindowStock.prototype={createKey:function(a){var b=a.k+":"+a.A;return b},put:function(a,b){var c=this.createKey(a);this.stock[c]=b},get:function(a){var b=this.createKey(a);return this.stock[b]}},function(){"use strict";var a=simpleWebDevTool.dao,b={};b.add=function(a,b){return console.log("service.mainService.add"),_.map(a,function(a){return a+Number(b)})},b.search=function(a,b){return console.log("service.mainService.search"),_.filter(a,function(a){return-1!==String(a).indexOf(b)})},b.addElem=function(a,b){console.log("service.mainService.addElem");for(var c=0;c<Number(b);++c)a.push(Math.random());return a},b.load=function(){return console.log("service.mainService.load"),a.mainDao.load()},b.refer=function(a){return console.log("service.mainService.refer"),a+" ほげほげほげ"},window.simpleWebDevTool.service.mainService=b}(jQuery),simpleWebDevTool.util.getAjaxAsync=function(a){"use strict";console.log("getAjaxAsync url:"+a);var b=$.ajax({type:"GET",url:a,async:!0});return b},simpleWebDevTool.util.getAjaxIfExist=function(a){"use strict";return console.log("getAjaxIfExist url:"+a),simpleWebDevTool.cache.ajaxCache[a]},simpleWebDevTool.util.putAjaxAsync=function(a,b,c){"use strict";console.log("putAjaxAsync url:"+a);var d={};return $.ajax({type:"POST",url:a,async:!0,data:b}).done(function(a){console.log("success"),console.log(a),d=a,c()}).fail(function(){console.error(b)}),d},simpleWebDevTool.util.getAjaxSyncWithCache=function(a){"use strict";var b=[];return b[a]||$.ajax({type:"GET",url:a,async:!1}).done(function(c){console.log("success"),console.log(c),b[a]=c}).fail(function(){console.error("error")}),b[a]},simpleWebDevTool.cache.tmplCache={},simpleWebDevTool.util.render=function(a){var b=simpleWebDevTool.cache.tmplCache;if(!b[a]){var c="views/"+a+".html";$.ajax({url:c,method:"GET",async:!1,dataType:"html",success:function(c){b[a]=c}})}return b[a]},simpleWebDevTool.util.dummyWait=function(a){for(var b=(new Date).getTime(),c=(new Date).getTime();b+a>c;)c=(new Date).getTime()},simpleWebDevTool.util.countStart=function(){simpleWebDevTool.util.startTime=(new Date).getTime(),console.info("count start")},simpleWebDevTool.util.timeShow=function(){var a=(new Date).getTime();console.info(a-simpleWebDevTool.util.startTime+" ms")};